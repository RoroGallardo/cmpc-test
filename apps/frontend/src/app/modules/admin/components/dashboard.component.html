<div class="dashboard-container">
  <h1>Dashboard</h1>

  <div class="alert alert-danger" *ngIf="error">{{ error }}</div>
  <div class="loading" *ngIf="loading">Cargando...</div>

  <div *ngIf="!loading && dashboardData">
    <!-- MÃ©tricas principales -->
    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-icon">ðŸ“Š</div>
        <div class="metric-value">{{ dashboardData.thisMonth.orders }}</div>
        <div class="metric-label">Ventas del Mes</div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">ðŸ’°</div>
        <div class="metric-value">${{ dashboardData.thisMonth.revenue | number:'1.2-2' }}</div>
        <div class="metric-label">Ingresos del Mes</div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">ðŸ“š</div>
        <div class="metric-value">{{ dashboardData.inventory.totalBooks }}</div>
        <div class="metric-label">Total Libros</div>
      </div>

      <div class="metric-card">
        <div class="metric-icon">ðŸ“¦</div>
        <div class="metric-value">{{ dashboardData.inventory.lowStockCount }}</div>
        <div class="metric-label">Stock Bajo</div>
      </div>
    </div>

    <!-- MÃ©tricas por perÃ­odo -->
    <div class="card">
      <h2>MÃ©tricas por PerÃ­odo</h2>
      <div class="metrics-grid">
        <div class="period-metric">
          <h3>Hoy</h3>
          <div>Ã“rdenes: {{ dashboardData.today.orders }}</div>
          <div>Items Vendidos: {{ dashboardData.today.sales }}</div>
          <div>Ingresos: ${{ dashboardData.today.revenue | number:'1.2-2' }}</div>
        </div>
        <div class="period-metric">
          <h3>Esta Semana</h3>
          <div>Ã“rdenes: {{ dashboardData.thisWeek.orders }}</div>
          <div>Items Vendidos: {{ dashboardData.thisWeek.sales }}</div>
          <div>Ingresos: ${{ dashboardData.thisWeek.revenue | number:'1.2-2' }}</div>
        </div>
        <div class="period-metric">
          <h3>Este Mes</h3>
          <div>Ã“rdenes: {{ dashboardData.thisMonth.orders }}</div>
          <div>Items Vendidos: {{ dashboardData.thisMonth.sales }}</div>
          <div>Ingresos: ${{ dashboardData.thisMonth.revenue | number:'1.2-2' }}</div>
        </div>
      </div>
    </div>

    <!-- Ventas recientes -->
    <div class="card">
      <h2>Ventas Recientes</h2>
      <table class="table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Fecha</th>
            <th>Items</th>
            <th>Total</th>
            <th>Estado</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let sale of dashboardData.recentSales">
            <td>{{ sale.id.substring(0, 8) }}</td>
            <td>{{ sale.createdAt | date: 'dd/MM/yyyy HH:mm' }}</td>
            <td>{{ sale.items.length }}</td>
            <td>${{ sale.total | number:'1.2-2' }}</td>
            <td>{{ sale.status }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Libros mÃ¡s vendidos -->
    <div class="card">
      <h2>Libros MÃ¡s Vendidos</h2>
      <table class="table">
        <thead>
          <tr>
            <th>TÃ­tulo</th>
            <th>Unidades Vendidas</th>
            <th>Ingresos</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let book of dashboardData.topSelling">
            <td>{{ book.title }}</td>
            <td>{{ book.unitsSold }}</td>
            <td>${{ book.revenue | number:'1.2-2' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
